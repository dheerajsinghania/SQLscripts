SELECT d.name
FROM sys.databases d
LEFT JOIN sys.dm_hadr_database_replica_states drs
    ON d.database_id = drs.database_id
   AND drs.is_local = 1
WHERE
    d.state_desc = 'ONLINE'
    AND (
        drs.role IS NULL    -- Not part of an AG
        OR drs.role = 1     -- PRIMARY
    );
-----------------------------------------

SELECT d.name
FROM sys.databases d
LEFT JOIN sys.dm_hadr_database_replica_states drs
    ON d.database_id = drs.database_id
   AND drs.is_local = 1
WHERE
    d.state_desc = 'ONLINE'
    AND ISNULL(drs.role, 1) = 1;
